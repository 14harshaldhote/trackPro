{% extends 'base.html' %}

{% block content %}
<div class="panel fade-in">
    <header class="panel-header mb-8">
        <h1 class="text-3xl font-bold">Insights</h1>
        <p class="text-secondary">Understanding your habits and patterns</p>
    </header>

    {% if insights %}
    <div class="space-y-6">
        <!-- Productivity Score -->
        <div class="card p-8 text-center bg-gradient-to-br from-surface to-bg">
            <h3 class="text-secondary text-sm font-bold uppercase tracking-wider mb-2">Productivity Score</h3>
            <div class="text-6xl font-bold text-primary mb-2">{{ productivity_score }}</div>
            <p class="text-secondary">Based on consistency and completion rates</p>
        </div>

        <!-- Pattern Analysis -->
        <div class="grid grid-cols-2 gap-6">
            <div class="card p-6">
                <h3 class="font-bold mb-1">Peak Performance</h3>
                <p class="text-sm text-secondary mb-4">Best time of day</p>
                <div class="text-xl font-medium flex items-center gap-2">
                    <span>‚ö°Ô∏è</span> {{ patterns.best_time|default:"Unknown"|title }}
                </div>
            </div>
            <div class="card p-6">
                <h3 class="font-bold mb-1">Most Consistent Day</h3>
                <p class="text-sm text-secondary mb-4">Highest completion rate</p>
                <div class="text-xl font-medium flex items-center gap-2">
                    <span>üìÖ</span> {{ patterns.best_day|default:"Unknown" }}
                </div>
            </div>
        </div>

        <!-- List of Insights -->
        <h3 class="font-bold text-lg mt-8 mb-4">Key Observations</h3>
        <div class="space-y-4">
            {% for insight in insights %}
            <div class="card p-4 border-l-4 border-l-primary flex items-start gap-3">
                <div class="text-2xl mt-1">
                    {% if insight.type == 'positive' %}üöÄ{% elif insight.type == 'warning' %}‚ö†Ô∏è{% else %}üí°{% endif %}
                </div>
                <div>
                    <h4 class="font-bold">{{ insight.title }}</h4>
                    <p class="text-sm text-secondary">{{ insight.message }}</p>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Recommendations -->
        {% if recommendations %}
        <h3 class="font-bold text-lg mt-8 mb-4">Recommendations</h3>
        <div class="grid-responsive">
            {% for rec in recommendations %}
            <div class="card p-4 bg-surface-alt">
                <h4 class="font-bold mb-2">{{ rec.action }}</h4>
                <p class="text-sm text-secondary mb-3">{{ rec.reason }}</p>
                {% if rec.link %}
                <a href="{{ rec.link }}" class="text-primary text-sm font-bold cursor-pointer hover:underline">Do it now
                    -></a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

    </div>
    {% else %}
    <div class="empty-state card p-12 text-center">
        <div class="empty-icon text-5xl mb-4">üß†</div>
        <h3 class="text-xl font-bold mb-2">Gathering Data</h3>
        <p class="text-secondary mb-6">Use the app for a few more days to generate personalized insights.</p>
    </div>
    {% endif %}
</div>
{% endblock %}