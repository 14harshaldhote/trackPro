{% load static %}
<!-- Vertical Sidebar Navigation -->
<aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">
    <nav class="sidebar-nav">
        <!-- Main Navigation -->
        <div class="nav-section">
            <a href="/" class="nav-item" data-panel="dashboard" data-shortcut="d">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                </svg>
                <span class="nav-text">Dashboard</span>
                <kbd class="nav-kbd">D</kbd>
            </a>

            <a href="/today/" class="nav-item" data-panel="today" data-shortcut="t">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="current Color">
                    <path
                        d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" />
                </svg>
                <span class="nav-text">Today</span>
                <kbd class="nav-kbd">T</kbd>
            </a>

            <a href="/week/" class="nav-item" data-panel="week" data-shortcut="w">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2h6v2H7V4zm0 4h6v2H7V8zm0 4h6v2H7v-2z" />
                </svg>
                <span class="nav-text">Week</span>
                <kbd class="nav-kbd">W</kbd>
            </a>

            <a href="/month/" class="nav-item" data-panel="month" data-shortcut="m">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zM4 9h12v7H4V9z" />
                </svg>
                <span class="nav-text">Month</span>
                <kbd class="nav-kbd">M</kbd>
            </a>
        </div>

        <!-- Analytics & Goals -->
        <div class="nav-section">
            <div class="nav-section-title">Insights</div>

            <a href="/analytics/" class="nav-item" data-panel="analytics" data-shortcut="a">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                </svg>
                <span class="nav-text">Analytics</span>
                <kbd class="nav-kbd">A</kbd>
            </a>

            <a href="/goals/" class="nav-item" data-panel="goals" data-shortcut="g">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                    <path fill-rule="evenodd"
                        d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                        clip-rule="evenodd" />
                </svg>
                <span class="nav-text">Goals</span>
                <kbd class="nav-kbd">G</kbd>
            </a>

            <a href="/insights/" class="nav-item" data-panel="insights">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M10 3.5a1.5 1.5 0 013 0V4a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-.5a1.5 1.5 0 000 3h.5a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-.5a1.5 1.5 0 00-3 0v.5a1 1 0 01-1 1H6a1 1 0 01-1-1v-3a1 1 0 00-1-1h-.5a1.5 1.5 0 010-3H4a1 1 0 001-1V6a1 1 0 011-1h3a1 1 0 001-1v-.5z" />
                </svg>
                <span class="nav-text">Insights</span>
            </a>
        </div>

        <!-- Your Trackers -->
        <div class="nav-section">
            <div class="nav-section-title">Your Trackers</div>

            {% if trackers %}
            {% for tracker in trackers %}
            <a href="/tracker/{{ tracker.tracker_id }}/" class="nav-item" data-panel="tracker-detail"
                data-tracker-id="{{ tracker.tracker_id }}">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z"
                        clip-rule="evenodd" />
                </svg>
                <span class="nav-text">{{ tracker.name|truncatechars:20 }}</span>
                {% if tracker.status == 'paused' %}
                <span class="nav-badge" style="background: var(--color-warning);">Paused</span>
                {% endif %}
            </a>
            {% endfor %}
            {% else %}
            <div class="empty-state" style="padding: 1rem 0.75rem; text-align: center;">
                <p style="font-size: 0.75rem; color: var(--color-text-tertiary); margin: 0;">No trackers yet</p>
            </div>
            {% endif %}

            <button class="nav-item nav-item-primary" data-action="add-tracker" aria-label="Add new tracker">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                        clip-rule="evenodd" />
                </svg>
                <span class="nav-text">New Tracker</span>
            </button>
        </div>

        <!-- More -->
        <div class="nav-section">
            <div class="nav-section-title">More</div>

            <a href="/templates/" class="nav-item" data-panel="templates">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path
                        d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z" />
                </svg>
                <span class="nav-text">Templates</span>
            </a>

            <a href="/help/" class="nav-item" data-panel="help" data-shortcut="h">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"
                        clip-rule="evenodd" />
                </svg>
                <span class="nav-text">Help</span>
                <kbd class="nav-kbd">H</kbd>
            </a>

            <a href="/settings/" class="nav-item" data-panel="settings" data-shortcut="s">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                        clip-rule="evenodd" />
                </svg>
                <span class="nav-text">Settings</span>
                <kbd class="nav-kbd">S</kbd>
            </a>
        </div>
    </nav>

    <!-- Sidebar Footer -->
    <div class="sidebar-footer">
        <div class="sidebar-tip">
            <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                <path fill-rule="evenodd"
                    d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z"
                    clip-rule="evenodd" />
            </svg>
            <span>Press <kbd>?</kbd> for shortcuts</span>
        </div>
    </div>
</aside>

<!-- Sidebar Overlay (Mobile) -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<style>
    .nav-kbd {
        margin-left: auto;
        padding: 0.125rem 0.375rem;
        font-size: 0.625rem;
        font-family: ui-monospace, monospace;
        background: var(--color-bg);
        border: 1px solid var(--color-border);
        border-radius: 4px;
        color: var(--color-text-tertiary);
        font-weight: 600;
    }

    .nav-item.active .nav-kbd {
        background: rgba(var(--color-primary-rgb), 0.15);
        border-color: var(--color-primary);
        color: var(--color-primary);
    }

    @media (max-width: 1024px) {
        .nav-kbd {
            display: none;
        }
    }
</style>